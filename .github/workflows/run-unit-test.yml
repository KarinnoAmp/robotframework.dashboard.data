name: Python Package using Conda

on:
  workflow_dispatch: null
  pull_request:
    branches:
      - main

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repos
      uses: actions/checkout@v4.1.3
    - name: Set up Python 3.12
      uses: actions/setup-python@v3
      with:
        python-version: '3.12'
    - name: actions-setup-mysql
      uses: shogo82148/actions-setup-mysql@v1.32.1
      with:
        root-password: Test1234
        user: test
        password: Test1234
    - name: Install pip dependencies
      run: |
        pip install --upgrade pip
        pip install --break-system-packages -r requirements.txt
    - name: Create DB
      run: python DumpDB/createDB.py
    - name: Run unit-test
      run: python -m unittest DumpDB/readJSON.py